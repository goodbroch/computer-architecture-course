---
title: 2.3. Асинхронный обмен
---

## Асинхронный обмен

Программа такого обмена строится так: сначала проверяется готовность ВУ к обмену и если оно готово, то дается команда на обмен. ВУ сообщает о готовности установкой флага.

***Пример 2.1*** С помощью ВУ-2 записать в ячейку 006 коды символов слова "ДА".

Программа для выполнения этого задания имеет вид:

<table>
    <thead>
        <tr>
            <th rowspan="2">Адрес</th>
            <th colspan="2">Содержимое</th>
            <th rowspan="2">Комментарий</th>
        </tr>
        <tr>
            <th>Код</th>
            <th>Мнемоника</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>05</td>
            <td>FFF8</td>
            <td></td>
            <td>Константа -8, используемая для сдвига</td>
        </tr>
        <tr>
            <td>06</td>
            <td>0000</td>
            <td></td>
            <td>Ячейка для записи слова "ДА"</td>
        </tr>
        <tr>
            <td>...</td>
            <td>...</td>
            <td>...</td>
            <td></td>
        </tr>
        <tr>
            <td>20</td>
            <td>E102</td>
            <td>TSF 2</td>
            <td rowspan="2">Опрос флага контроллера ВУ-2 и повторение этой операции: если ВУ-2 не готово к обмену (флаг=0).</td>
        </tr>
        <tr>
            <td>21</td>
            <td>C020</td>
            <td>BR 20</td>
        </tr>
        <tr>
            <td>22</td>
            <td>E202</td>
            <td>IN 2</td>
            <td>Это действие выполняется лишь после готовности ВУ-2, т.е. когда при выполнении TSF 2 выяснятся, что флаг=1 и пропускается BR 20, По команде IN 2 содержимое регистра данных контроллера ВУ-2 пересылается в восемь младших разрядов аккумуляторов.</td>
        </tr>
        <tr>
            <td>23</td>
            <td>E002</td>
            <td>CLF 2</td>
            <td>Сброс готовности ВУ-2 (очистка флага ВУ-2).</td>
        </tr>
        <tr>
            <td>24</td>
            <td>F600</td>
            <td>ROL</td>
            <td rowspan="3">Код первого введенного символа сдвигается на восемь разрядов влево и освобождается место для ввода следующего символа.</td>
        </tr>
        <tr>
            <td>25</td>
            <td>0005</td>
            <td>ISZ 5</td>
        </tr>
        <tr>
            <td>26</td>
            <td>C024</td>
            <td>BR 24</td>
        </tr>
        <tr>
            <td>27</td>
            <td>E102</td>
            <td>TSF 2</td>
            <td rowspan="2">Опрос флага контроллера ВУ-2 ..... (см. Комментарии к командам 20 и 21)</td>
        </tr>
        <tr>
            <td>28</td>
            <td>C027</td>
            <td>BR 27</td>
        </tr>
        <tr>
            <td>29</td>
            <td>E202</td>
            <td>IN 2</td>
            <td>Ввод кода символа (если подан сигнал готовности ВУ-2)</td>
        </tr>
        <tr>
            <td>2A</td>
            <td>E002</td>
            <td>CLF 2</td>
            <td>Сброс готовности ВУ-2</td>
        </tr>
        <tr>
            <td>2B</td>
            <td>3006</td>
            <td>MOV 6</td>
            <td>Пересылка кода слова "ДА" в ячейку 006</td>
        </tr>
        <tr>
            <td>2C</td>
            <td>F000</td>
            <td>HLT</td>
            <td>Останов ЭВМ</td>
        </tr>
    </tbody>
</table>

Две первые команды этой программы "заставляют" ЭВМ ожидать его готовности ВУ-2 к выдаче данных.  Поэтому необходимо ввести код символа "Д" в регистр данных ВУ-2. После сброса готовности ВУ-2 (команда CLF 2), которая подтверждает, что данные из регистра данных контроллера ВУ-2 переписаны в аккумулятор можно приступить к набору кода символа "А". В процессе набора этого кода ЭВМ занята сдвигом кода символа "Д" в старшие разряды аккумулятора, чтобы подготовиться к приему символа "А", и ожиданием поступления нового сигнала готовности ВУ-2 к выдаче информации. Так как ЭВМ выполняет эти операции значительно быстрее, чем человек, набирающий код нового символа. Теперь в аккумулятор перепишется все слово "ДА", затем оно перепишется в ячейку 006 и выполнение программы прекратиться.

Легко заметить, что при асинхронном обмене ЭВМ должна тратить время на ожидание момента готовности, а так как готовность проверяется командным путем (команда TSF), то в это время ЭВМ не может выполнять никакой другой работы по преобразованию данных.