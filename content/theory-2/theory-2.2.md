---
title: 2.2. Программно-управляемая передача данных
---

## Программно-управляемая передача данных

При использовании программно-управляемого обмена должна быть составлена программа, обеспечивающая пересылку данных из памяти ЭВМ в аккумулятор и далее в регистр памяти контроллера ВУ (вывод данных) или из регистра данных контроллера ВУ в аккумулятор и затем в память ЭВМ (ввод данных). В такое программе можно реализовать один из трех типов обмена: синхронный, асинхронный и по прерыванию. Синхронный обмен очень редко используется в ЭВМ и не будет рассматриваться в данном пособии, остальные виды обмена рассматриваются в п.п. 2.4 и 2.5.

Формат команд ввода-вывода приведен на рис. 1.2.в. Код операции (1110)<sub>2</sub> служит для отличия этих команд от других команд ЭВМ. Между собой они отличаются кодом приказа: пересылка данных (IN В - ввод и OUT В - вывод), ***проверка готовности ВУ*** (TSF B) и ***сброс состояния готовности*** (CLF B), где В - адрес ВУ. Адрес позволяет связать процессор с одним из подключенных к нему ВУ (их может быть до 2<sup>8</sup>=256).

***Флажок*** - однобитовый регистр готовности ВУ, устанавливаемый в единичное состояние, когда ВУ готово к обмену информацией. Если флажок сброшен (установлен в ноль), ВУ занято: устройство вывода еще обрабатывает предыдущую команду, а устройство ввода готовит данные для передачи в процессор.

***Команда CLF B*** (E0xx, где хх - две последние 16-ричные цифры адреса ВУ) служит для установки в нуль флажка ВУ с адресом В.

***Команда TSF B*** (E1xx) служит для проверки готовности к обмену ВУ с адресом В. Если флажок этого ВУ сброшен (ВУ не готово к обмену), то выполняется команда, расположенная вслед за TSF В. В противном случае эта команда ***пропускается*** и выполняется команда, расположенная через одну за TSF В.

***Команда IN B*** (E2хх) служит для пересылки содержимого регистра данных контроллера ВУ с адресом B в восемь младших разрядов аккумулятора.

***Команда OUT B*** (E3хх) служит для пересылки содержимого восьми младших разрядов аккумулятора в регистр данных контроллера ВУ с адресов В.

Для организации обмена с ВУ в состав устройства управления базовой ЭВМ включены два устройства: регистр состояний внешних устройств (Ф) и контроллер прерываний. Связь контроллеров ВУ с этими устройствами осуществляется по линиям "Состояние флага" и "Запрос прерывания". Данные передаются по шинам ввода и вывода.